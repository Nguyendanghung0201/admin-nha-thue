(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8d580e48"],{"0d30":function(t,e,i){"use strict";i("e409")},"549c":function(t,e,i){},be7f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nk-content nk-content-fluid pt-0"},[e("div",{staticClass:"container-xl wide-lg"},[e("div",{staticClass:"nk-content-body"},[e("div",{staticClass:"content-page wide-md m-auto"},[e("div",{staticClass:"nk-block"},[e("div",{staticClass:"card card-bordered"},[e("div",{staticClass:"card-inner p-sm-5"},[t._m(0),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"full-name"}},[t._v("Giảm dần")]),e("div",{staticClass:"form-control-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.typecraw,expression:"typecraw"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.typecraw)?t._i(t.typecraw,null)>-1:t.typecraw},on:{change:function(e){var i=t.typecraw,a=e.target,l=!!a.checked;if(Array.isArray(i)){var s=null,n=t._i(i,s);a.checked?n<0&&(t.typecraw=i.concat([s])):n>-1&&(t.typecraw=i.slice(0,n).concat(i.slice(n+1)))}else t.typecraw=l}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"full-name"}},[t._v("Local")]),e("div",{staticClass:"form-control-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.local,expression:"local"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.local)?t._i(t.local,null)>-1:t.local},on:{change:function(e){var i=t.local,a=e.target,l=!!a.checked;if(Array.isArray(i)){var s=null,n=t._i(i,s);a.checked?n<0&&(t.local=i.concat([s])):n>-1&&(t.local=i.slice(0,n).concat(i.slice(n+1)))}else t.local=l}}})])]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label",attrs:{for:"full-name"}},[t._v("cookie")]),e("div",{staticClass:"form-control-wrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.cookie,expression:"cookie"}],staticClass:"form-control",attrs:{type:"text",id:"full-name"},domProps:{value:t.cookie},on:{input:function(e){e.target.composing||(t.cookie=e.target.value)}}})])]),e("div",{staticClass:"form-group"},[e("button",{staticClass:"btn btn-lg btn-primary",on:{click:function(e){return t.Update_du_lieu()}}},[t._v("Cập nhật dữ liệu nhà")])])])])])]),t._m(1)]),e("div",{attrs:{id:"showdulieu"}},[e("section",[e("h1",[t._v("Dữ liệu ")]),t._m(2),e("div",{staticClass:"tbl-content"},[e("table",{attrs:{cellpadding:"0",cellspacing:"0"}},[e("tbody",{attrs:{id:"body_dulieu"}},t._l(t.list,(function(i,a){return e("tr",{key:a,class:t.current_update>a?"daxong":""},[e("th",[t._v(t._s(a+1))]),e("th",[t._v(t._s(i.name))]),e("th",{staticStyle:{width:"25%"}},[t._v(t._s(i.url))]),e("th",[t._v("đã crawl")])])})),0)])])])])])])},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"nk-block-head-content"},[e("h3",{staticClass:"nk-block-title py-1 px-4 fw-normal text-dark w-fit-content mx-sm-auto mx-0"},[t._v(" Crawl du lieu")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"card card-bordered h-100"},[e("div",{staticClass:"card-inner"},[e("div",{staticClass:"card-head"},[e("h5",{staticClass:"card-title"},[t._v("Danh sach nha lay duoc")])])])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tbl-header"},[e("table",{attrs:{cellpadding:"0",cellspacing:"0",border:"0"}},[e("thead",[e("tr",[e("th",[t._v("stt")]),e("th",[t._v("Tên nhà")]),e("th",{staticStyle:{width:"25%"}},[t._v(" Link ngôi nhà")]),e("th",[t._v("Trạng thái")])])])])])}],s={name:"Tool",metaInfo(){return{title:this.$t("menu.term_of_use")}},data(){return{url:"https://www.realnetpro.com/main.php?method=estate&display=building",load_first:!1,cookie:"",pagemin:0,local:!1,pagemax:0,typecraw:!1,name:"",nhaGalist:[],listimage:[],current_update:0,list:[],detailHome:{address:"",along_id:0,area:"",city_id:0,dau_xe:"",detail_id:"",gia_thong:"",images:"",khuyenmai:0,lat_map:"",line:"",list_img_url:[],long_map:"",nam_xay:"",name:"",phi_dich_vu:"",date:"defaul",phone:"",price:"",province_id:0,real_id:"",status:1,thongtin_1:"",thongtin_2:"",thongtin_3:"",thongtin_4:"",tien_coc:"",toa_tang:"",web:""},proviceOptions:[],cityOptions:[],list_khuyen_mai:[],positon:!1}},methods:{async batdau_cap_nhat_du_lieu(){let t=0;for(let e of this.list){this.current_update=t,t++;let i={mod:"delete",id:e.detail_id},a=await this.$store.dispatch("Home/deleteBuild",i);if(0===a.code&&a.success){let t=await this.crawl_detail_dulieu(e.url,e.detail_id.replace("RE",""));if(!t.status)return this.$alert("Quá trình crawl bị lỗi, hãy kiểm tra cookie và tiếp tục crawl")}}this.Update_du_lieu()},async batdaucrawl_tung_nha(){let t=0;for(let e of this.list){this.current_update=t,t++;let i=await this.crawl_detail_dulieu(e.url,e.detail_id);if(!i.status)return this.$alert("Quá trình crawl bị lỗi, hãy kiểm tra cookie và tiếp tục crawl")}return this.$alert("đã crawl xong")},async rapdulieu(t,e,i,a){try{var l,s,n,o,r,c,d,u,h,_,p,m,f,v,g,k,y,w;let{imageavt:b,list_img_url:x,list_infor:C,vido:O}=t;if(!b||!x||!C||0==C.length||!O)return{status:!1,code:4};let $=x.split(",").filter(t=>t),K=C.filter(t=>"所在地"==t.key)[0].value.replace("地図を見る","").replace("地図を見る",""),S=(C.filter(t=>"所在地"==t.key)[0].value,C.filter(t=>"間取"==t.key)[0].value),I="";S&&(S=S.replace(/&nbsp;/g,""),S.includes("1R")&&(I="1R"),(S.includes("1K")||S.includes("1DK")||S.includes("1LDK"))&&(I="1K"),(S.includes("2K")||S.includes("2DK")||S.includes("2LDK"))&&(I="2K"),(S.includes("3K")||S.includes("3DK")||S.includes("3LDK"))&&(I="3K"));let D=null!==(l=null===(s=C.filter(t=>"駐車場"==t.key)[0])||void 0===s?void 0:s.value)&&void 0!==l?l:"",A=null!==(n=null===(o=C.filter(t=>"交通"==t.key)[0])||void 0===o?void 0:o.value)&&void 0!==n?n:"",L=null!==(r=null===(c=C.filter(t=>"交通"==t.key)[0])||void 0===c?void 0:c.value2)&&void 0!==r?r:"",j=(d=null===(u=C.filter(t=>"交通"==t.key)[0])||void 0===u?void 0:u.value,null!==(h=null===(_=C.filter(t=>"号室名"==t.key)[0])||void 0===_?void 0:_.value)&&void 0!==h?h:""),U=null!==(p=null===(m=C.filter(t=>"物件名"==t.key)[0])||void 0===m?void 0:m.value)&&void 0!==p?p:"",H=null!==(f=null===(v=C.filter(t=>"築年月"==t.key)[0])||void 0===v?void 0:v.value)&&void 0!==f?f:"",R=null!==(g=null===(k=C.filter(t=>"賃料 / 管理費・共益費"==t.key)[0])||void 0===k?void 0:k.value)&&void 0!==g?g:"",T=null!==(y=null===(w=C.filter(t=>"敷金 / 礼金"==t.key)[0])||void 0===w?void 0:w.value)&&void 0!==y?y:"",B="",E="";const N=/\d+/g;if(R){B=R.slice(0,R.indexOf("/")),E=R.slice(R.indexOf("/")+1,R.length);let t=E.match(N);t?(E=t.join(""),E=parseInt(E).toLocaleString("en-US")+" 円"):E=""}let P="",G="";if(T){let t=T.indexOf("敷金");if(-1!=t&&(P=T.slice(0,t)),P&&-1!=P.indexOf("なし"))P="";else{if(P&&-1!=P.indexOf("円")){let t=P.match(N);t?(P=t.join(""),P=parseInt(P).toLocaleString("en-US")+" 円"):P=""}if(P&&-1!=P.indexOf("ヶ月")){let t=P.match(N);t?(P=t.join(""),P=parseInt(P)+" ヶ月"):P=""}}if(-1!=T.indexOf("礼金"))if(G=T.slice(T.indexOf("礼金"),T.length),G&&-1!=G.indexOf("なし"))G="なし";else{if(G&&-1!=G.indexOf("円")){let t=G.match(N);t?(G=t.join(""),G=parseInt(G).toLocaleString("en-US")+" 円"):G=""}if(G&&-1!=G.indexOf("ヶ月")){let t=G.match(N);t?(G=t.join(""),G=parseInt(G)+" ヶ月"):G=""}}}let J=O.indexOf("&q="),Q=O.indexOf("&zoom"),q=O.slice(J+3,Q),z=q.split(","),F=z[0],M=z[1];this.listimage=$;let V=0,W=0,X=C.filter(t=>"所在地"==t.key)[0].value2+"-"+K+"-"+A+"-"+L,Y={address:K,along_id:W,area:S,city_id:V,dau_xe:D,detail_id:a+"RE",gia_thong:A,images:b,khuyenmai:0,lat_map:F,line:A,list_img_url:x,long_map:M,nam_xay:H,room_number:j,name:U,search_key:X,phi_dich_vu:E,date:"defaul",phone:"",kieu_phong:I,price:B,province_id:e,real_id:a,status:1,thongtin_1:"",thongtin_2:"",thongtin_3:"",thongtin_4:"",tien_coc:P,tien_le:G,toa_tang:"",web:i};return await this.saveBuild(Y)}catch(b){return console.log("e ",b),{status:!1,code:6,err:b}}},async crawl_detail_dulieu(t,e){if(!t||!this.cookie||!e)return{status:!1,code:1};let i=this.cookie.indexOf("ini_pref=");if(-1==i)return{status:!1,code:2};let a=this.cookie.slice(i+9,i+11);!1===this.load_first&&(this.load_first=!0);let l=await this.$store.dispatch("Home/crawldu_lieu",{url:t,cookie:this.cookie,id:e,check:this.local});if(l.success){let i=l.data;return l.pass?{status:!0}:l.data&&l.data.list_infor&&l.data.list_infor.length&&l.data.imageavt?await this.rapdulieu(i,a,t,e):{status:!1,code:4}}return{status:!1,code:3}},async saveBuild(t){if(t.address&&t.area&&t.price&&t.long_map&&t.lat_map){let e=await this.$store.dispatch("Home/addBuilding2",{mod:"add",list:t});return e.success?{status:!0,code:0}:{status:!1,code:8}}return{status:!1,code:7}},savecooki(t){localStorage.setItem("cookiereal",t)},savetenfile(t){localStorage.setItem("file_name",t)},async load_file(){if(!this.cookie||!this.name)return this.$alert("điền thong tin");this.savecooki(this.cookie);let t=await this.$store.dispatch("Home/getinfor_file",{name:this.name});t.success&&t.data&&t.data.data.length>0&&(this.list=t.data.data.map(t=>{let e=t.real_id.slice(t.real_id.search("browsing_")+9,t.real_id.length);return t.url=`https://www.realnetpro.com/room_detail.php?id=${e}&type=room`,t.status=!1,t.detail_id=e,t}),setTimeout(()=>{this.batdaucrawl_tung_nha()},1e3))},async Update_du_lieu(){let t=await this.$store.dispatch("Dashboard/update_date_build",{id:this.typecraw?1:2});if(!this.cookie)return this.$alert("điền thong tin");if(this.savecooki(this.cookie),t.success){if(t.done)return this.$alert("Cập nhật dữ liệu đã xong");this.list=t.data.data.map(t=>(t.url=`https://www.realnetpro.com/room_detail.php?id=${t.detail_id.replace("RE","")}&type=room`,t.status=!1,t)),setTimeout(()=>{this.batdau_cap_nhat_du_lieu()},1e3)}}},mounted(){let t=localStorage.getItem("cookiereal");t&&(this.cookie=t);let e=localStorage.getItem("file_name");e&&(this.name=e)}},n=s,o=(i("ebb9"),i("0d30"),i("2877")),r=Object(o["a"])(n,a,l,!1,null,"57604a1f",null);e["default"]=r.exports},e409:function(t,e,i){},ebb9:function(t,e,i){"use strict";i("549c")}}]);